import{u as A,l as R,e as f,m as S,n as T,r as g,o as n,c as w,w as _,b as c,F as h,d as V,h as B,a as s,p as D,t as k,q as j,j as C,f as M,s as z,i as E,x as F,g as p,T as N,y as $,k as b,z as H}from"./index.3b5bad84.js";const L=["value","id"],U=["for"],q={__name:"menu",props:{menu:{type:Array,default(){return[]}}},setup(x){const d=x,t=A(),o=R(()=>d.menu.filter(e=>!e.meta||!e.meta.hidden)),u=f([]),i=()=>{const{matched:e}=t;e.length>1&&(u.value=[e[1].name])};S(()=>{i()}),T(()=>o.value,e=>{i()});function m(e){return e.children.length<1?0:`${50*e.children.filter(a=>!a.meta||!a.meta.hidden).length}px`}return(e,r)=>{const a=g("router-link"),y=g("v-scroll");return o.value.length?(n(),w(y,{key:0,class:"menu"},{default:_(()=>[(n(!0),c(h,null,V(o.value,l=>(n(),c("div",{class:"menu-nav",key:l.name},[B(s("input",{class:"nav-list-toggle",value:l.name,"onUpdate:modelValue":r[0]||(r[0]=v=>u.value=v),type:"checkbox",id:l.name},null,8,L),[[D,u.value]]),l.children&&l.children.length?(n(),c(h,{key:0},[s("label",{class:"nav-title nav-item",for:l.name},[s("p",null,k(l.meta.title),1),r[1]||(r[1]=s("em",{class:"icon-arrow"},null,-1))],8,U),s("div",{class:"nav-list",style:j({maxHeight:m(l)})},[(n(!0),c(h,null,V(l.children,v=>(n(),c(h,{key:v.name},[!v.meta||!v.meta.hidden?(n(),w(a,{key:0,to:{name:v.name},class:"nav-item"},{default:_(()=>[s("p",null,k(v.meta.title),1)]),_:2},1032,["to"])):C("",!0)],64))),128))],4)],64)):(n(),w(a,{key:1,to:{name:l.name},class:"nav-item nav-title"},{default:_(()=>[s("p",null,k(l.meta.title),1)]),_:2},1032,["to"]))]))),128))]),_:1})):C("",!0)}}};const W={class:"bread-nav"},G={__name:"bread-nav",props:{nav:{type:Array,default(){return[]}}},setup(x){const d=x,t=f([]),o=f({});return M(()=>{if(d.nav.length<1){t.value=[],o.value={};return}t.value=[...d.nav],o.value=t.value.pop()}),(u,i)=>{const m=g("router-link");return n(),c("div",W,[i[0]||(i[0]=s("span",{class:"nav-icon"},"\u5F53\u524D\u4F4D\u7F6E:",-1)),(n(!0),c(h,null,V(t.value,e=>(n(),w(m,{to:e,key:e.name},{default:_(()=>[z(k(e.meta.title),1)]),_:2},1032,["to"]))),128)),s("span",null,k(o.value.meta.title),1)])}}};const I={class:"layout"},J={class:"main"},O={__name:"layout",setup(x){const d=A(),t=E("state"),o=f([]),u=f([]);M(()=>{const{matched:e}=d,r=u.value[0]?u.value[0].name:"";if(u.value=e,r===e[0].name)return;const a=H.find(y=>y.name===e[0].name);a&&(o.value=a.children?a.children:[])});function i(){t.menuVisible=!1}const m=f(0);return F(()=>{m.value=m.value===0?1:0}),(e,r)=>{const a=g("router-view"),y=g("v-scroll");return n(),c("div",I,[p(N,{name:"fade"},{default:_(()=>[B(s("div",{class:"menu-mask",onClick:i},null,512),[[$,b(t).lessWindow&&b(t).menuVisible]])]),_:1}),p(N,{name:"fade"},{default:_(()=>[B(p(q,{menu:o.value},null,8,["menu"]),[[$,b(t).menuVisible]])]),_:1}),s("div",J,[p(G,{nav:u.value},null,8,["nav"]),p(y,{class:"main-scroll","view-class":"main-scroll-view",y:m.value},{default:_(()=>[p(a)]),_:1},8,["y"])])])}}};export{O as default};
