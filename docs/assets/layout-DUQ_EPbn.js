import{c as D,r as f,M as R,w as S,g,v as x,l as C,k as n,x as d,j as c,F as y,t as V,D as B,m as s,N as L,z as k,I as T,L as M,y as j,i as z,B as p,O as N,u as b,P as $}from"./@vue-DhircnFq.js";import{u as A,b as E}from"./vue-router-BCpH6i2m.js";import{r as F}from"./index-Dy7W4W3g.js";const H=["value","id"],U=["for"],I={__name:"menu",props:{menu:{type:Array,default(){return[]}}},setup(w){const _=w,t=A(),o=D(()=>_.menu.filter(e=>!e.meta||!e.meta.hidden)),r=f([]),i=()=>{const{matched:e}=t;e.length>1&&(r.value=[e[1].name])};R(()=>{i()}),S(()=>o.value,e=>{i()});function m(e){return e.children.length<1?0:`${50*e.children.filter(a=>!a.meta||!a.meta.hidden).length}px`}return(e,u)=>{const a=g("router-link"),h=g("v-scroll");return o.value.length?(n(),x(h,{key:0,class:"menu"},{default:d(()=>[(n(!0),c(y,null,V(o.value,l=>(n(),c("div",{class:"menu-nav",key:l.name},[B(s("input",{class:"nav-list-toggle",value:l.name,"onUpdate:modelValue":u[0]||(u[0]=v=>r.value=v),type:"checkbox",id:l.name},null,8,H),[[L,r.value]]),l.children&&l.children.length?(n(),c(y,{key:0},[s("label",{class:"nav-title nav-item",for:l.name},[s("p",null,k(l.meta.title),1),u[1]||(u[1]=s("em",{class:"icon-arrow"},null,-1))],8,U),s("div",{class:"nav-list",style:T({maxHeight:m(l)})},[(n(!0),c(y,null,V(l.children,v=>(n(),c(y,{key:v.name},[!v.meta||!v.meta.hidden?(n(),x(a,{key:0,to:{name:v.name},class:"nav-item"},{default:d(()=>[s("p",null,k(v.meta.title),1)]),_:2},1032,["to"])):C("",!0)],64))),128))],4)],64)):(n(),x(a,{key:1,to:{name:l.name},class:"nav-item nav-title"},{default:d(()=>[s("p",null,k(l.meta.title),1)]),_:2},1032,["to"]))]))),128))]),_:1})):C("",!0)}}},O={class:"bread-nav"},P={__name:"bread-nav",props:{nav:{type:Array,default(){return[]}}},setup(w){const _=w,t=f([]),o=f({});return M(()=>{if(_.nav.length<1){t.value=[],o.value={};return}t.value=[..._.nav],o.value=t.value.pop()}),(r,i)=>{const m=g("router-link");return n(),c("div",O,[i[0]||(i[0]=s("span",{class:"nav-icon"},"当前位置:",-1)),(n(!0),c(y,null,V(t.value,e=>(n(),x(m,{to:e,key:e.name},{default:d(()=>[j(k(e.meta.title),1)]),_:2},1032,["to"]))),128)),s("span",null,k(o.value.meta.title),1)])}}},W={class:"layout"},q={class:"main"},Q={__name:"layout",setup(w){const _=A(),t=z("state"),o=f([]),r=f([]);M(()=>{const{matched:e}=_,u=r.value[0]?r.value[0].name:"";if(r.value=e,u===e[0].name)return;const a=F.find(h=>h.name===e[0].name);a&&(o.value=a.children?a.children:[])});function i(){t.menuVisible=!1}const m=f(0);return E(()=>{m.value=m.value===0?1:0}),(e,u)=>{const a=g("router-view"),h=g("v-scroll");return n(),c("div",W,[p($,{name:"fade"},{default:d(()=>[B(s("div",{class:"menu-mask",onClick:i},null,512),[[N,b(t).lessWindow&&b(t).menuVisible]])]),_:1}),p($,{name:"fade"},{default:d(()=>[B(p(I,{menu:o.value},null,8,["menu"]),[[N,b(t).menuVisible]])]),_:1}),s("div",q,[p(P,{nav:r.value},null,8,["nav"]),p(h,{class:"main-scroll","view-class":"main-scroll-view",y:m.value},{default:d(()=>[p(a)]),_:1},8,["y"])])])}}};export{Q as default};
